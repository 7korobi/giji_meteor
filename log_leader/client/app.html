<head>
  <title>Leaderboard</title>
</head>

<body>
{{loginButtons}}
{{> main}}
{{> log}}
</body>

<template name="main">
  {{folder}} {{ story_id }}  {{ event_id }}
  {{#if folder}}
    {{#if story_id}}
      {{> story}}
    {{else}}
      {{> folder}}
    {{/if}}
  {{else}}
    {{> folders}}
  {{/if}}
</template>

<template name="log">
  {{#if story_id}}
    {{#if event_id}}
      {{> event}}
    {{/if}}
  {{/if}}
</template>

<template name="folders">
  <div class="folders">
    <ul>
      {{#each folders}}
        <li><a class="choice" id="{{this}}">{{this}}</a>
      {{/each}}
    </ul>
  </div>
</template>

<template name="folder">
  <a class="back"> 戻る </a>
  <div class="folder">
    {{#each stories}}
    <dl>
      <dt>{{_id}}<dd><a class="choice" id="{{_id}}">{{name}}</a>
    </dl>
    {{/each}}
  </div>
</template>

<template name="story">
  <a class="back"> 戻る </a>
  <div class="story">
    {{#with story}}
    <dl>
      <dt>{{name}}<dd>{{{comment}}}
    </dl>
    {{/with}}
    <ul>
    {{#each events}}
    <li> <a class="choice" id="{{_id}}">{{name}}</a>
    {{/each}}
    </ul>
  </div>
</template>

<template name="event">
  <a class="back"> 戻る </a>
  <div class="event">
    event: [
    {{#each messages}}
      message: {{> message}}
      <hr>
    {{/each}}
    ]
  </div>
</template>

<template name="message">
  <div class="message">
    <h3 id="{{logid}}">{{name}}</h3>
    <p>{{{log}}}</p>
    <p>{{date}}</p>
  </div>
</template>

